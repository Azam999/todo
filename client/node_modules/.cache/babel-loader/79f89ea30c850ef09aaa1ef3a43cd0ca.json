{"ast":null,"code":"import _regeneratorRuntime from\"/Users/azamahmed/Desktop/dev/crud-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/azamahmed/Desktop/dev/crud-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/azamahmed/Desktop/dev/crud-app/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import React,{useState,useEffect}from\"react\";import{Link}from\"react-router-dom\";import Error from\"./Error\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var TodoForm=function TodoForm(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),todoValue=_useState2[0],setTodoValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),todos=_useState4[0],setTodos=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var todosLength=function todosLength(){var length=todos.length;switch(length){case 0:return/*#__PURE__*/_jsx(\"b\",{children:\"No todos!\"});case 1:return/*#__PURE__*/_jsx(\"b\",{children:\"1 thing to do!\"});default:return/*#__PURE__*/_jsxs(\"b\",{children:[todos.length,\" things to do!\"]});}};// Sets the value of the todo\nvar handleInputChange=function handleInputChange(e){var value=e.target.value;if(value!==\"\"){setError(false);}setTodoValue(value);};var getTodos=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:response=\"\";_context.next=3;return axios.get(\"/todos\");case 3:response=_context.sent;setTodos(response.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function getTodos(){return _ref.apply(this,arguments);};}();useEffect(function(){getTodos();},[]);var handleSubmit=function handleSubmit(e){e.preventDefault();if(todoValue!==\"\"){var todo={title:todoValue};// axios post request to backend\naxios.post(\"/add/todo\",todo).then(function(){getTodos();}).catch(function(err){return console.error(err);});}else{setError(true);console.error(\"error\");}};var handleDelete=function handleDelete(id){axios.delete(\"/delete/todo/\".concat(id)).then(function(){return getTodos();}).catch(function(err){return console.error(err);});};return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[error?/*#__PURE__*/_jsx(Error,{}):null,/*#__PURE__*/_jsxs(\"form\",{className:\" d-flex flex-row mb-3\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control me-3\",placeholder:\"Todo\",onChange:handleInputChange}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",value:\"Add Todo\",className:\"btn btn-primary\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 mb-2\",children:todosLength()}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"ul\",{className:\"list-group\",children:todos.map(function(todo){return/*#__PURE__*/_jsxs(\"li\",{className:\"list-group-item d-flex justify-content-between align-items-center\",children:[todo.title,/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:{pathname:\"/edit\",state:todo._id},children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-secondary\",children:\"Edit\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger ms-3\",onClick:function onClick(){return handleDelete(todo._id);},children:\"\\uD83D\\uDDD1\"})]})]},todo._id);})})})]});};export default TodoForm;","map":{"version":3,"sources":["/Users/azamahmed/Desktop/dev/crud-app/client/src/components/TodoForm.jsx"],"names":["axios","React","useState","useEffect","Link","Error","TodoForm","todoValue","setTodoValue","todos","setTodos","error","setError","todosLength","length","handleInputChange","e","value","target","getTodos","response","get","data","handleSubmit","preventDefault","todo","title","post","then","catch","err","console","handleDelete","id","delete","map","pathname","state","_id"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport Error from \"./Error\";\n\nconst TodoForm = () => {\n  const [todoValue, setTodoValue] = useState(\"\");\n  const [todos, setTodos] = useState([]);\n  const [error, setError] = useState(false);\n\n  const todosLength = () => {\n    let length = todos.length;\n\n    switch (length) {\n      case 0:\n        return <b>No todos!</b>\n      case 1:\n        return <b>1 thing to do!</b>\n      default:\n        return <b>{todos.length} things to do!</b>\n    }\n       \n  }\n\n  // Sets the value of the todo\n  const handleInputChange = (e) => {\n    let value = e.target.value;\n    if (value !== \"\") {\n      setError(false);\n    }\n    setTodoValue(value);\n  };\n\n  const getTodos = async () => {\n    let response = \"\";\n    response = await axios.get(\"/todos\");\n    setTodos(response.data);\n  };\n\n  useEffect(() => {\n    getTodos();\n  }, []);\n\n  const handleSubmit = (e) => {\n    e.preventDefault();\n    if (todoValue !== \"\") {\n      const todo = {\n        title: todoValue,\n      };\n\n      // axios post request to backend\n      axios\n        .post(\"/add/todo\", todo)\n        .then(() => {\n          getTodos();\n        })\n        .catch((err) => console.error(err));\n    } else {\n      setError(true);\n      console.error(\"error\");\n    }\n  };\n\n  const handleDelete = (id) => {\n    axios\n      .delete(`/delete/todo/${id}`)\n      .then(() => getTodos())\n      .catch((err) => console.error(err));\n  };\n\n  return (\n    <div className=\"container mt-5\">\n      {error ? <Error /> : null}\n      <form className=\" d-flex flex-row mb-3\" onSubmit={handleSubmit}>\n        <input\n          type=\"text\"\n          className=\"form-control me-3\"\n          placeholder=\"Todo\"\n          onChange={handleInputChange}\n        />\n        <input type=\"submit\" value=\"Add Todo\" className=\"btn btn-primary\" />\n      </form>\n\n      <div className=\"mt-4 mb-2\">\n        {\n          todosLength()\n        }\n      </div>\n\n      <div>\n        <ul className=\"list-group\">\n          {todos.map((todo) => (\n            <li\n              key={todo._id}\n              className=\"list-group-item d-flex justify-content-between align-items-center\"\n            >\n              {todo.title}\n              <div>\n                <Link\n                  to={{\n                    pathname: \"/edit\",\n                    state: todo._id,\n                  }}\n                >\n                  <button className=\"btn btn-secondary\">Edit</button>\n                </Link>\n                <button\n                  className=\"btn btn-danger ms-3\"\n                  onClick={() => handleDelete(todo._id)}\n                >\n                  ðŸ—‘\n                </button>\n              </div>\n            </li>\n          ))}\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default TodoForm;\n"]},"metadata":{},"sourceType":"module"}